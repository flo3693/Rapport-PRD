\def\fileversion{1.0}
\def\filedate{2001/9/10}
\def\docdate{2001/9/10}
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{polytech/headings}[\filedate\space\fileversion\space Polytech document class sub package]
\typeout{Package `polytech headings' \fileversion\space<\filedate>}

% header/footer
\DeclareFixedFont{\marvel@header@font}{\encodingdefault}{phv}{b}{n}{12pt}
\DeclareFixedFont{\marvel@footer@font}{\encodingdefault}{phv}{b}{n}{12pt}

\newcommand{\marvel@fancyheadodd}[1]{%
  \begin{tikzpicture}
    \node[
      color=black!50,
      fill=black!50,
      overlay,
      text width=\textwidth + 5cm,
      inner sep=0.2cm,
      inner ysep=0.3cm,
      yshift=0.35cm,
      ] (0,0) {\vspace{1em}} ;
    \node[
      text width=\textwidth,
      inner sep=0cm,
      inner ysep=0cm,
      xshift=0cm,
      color=white,
      anchor=center,
      align=right,
      overlay,
      yshift=0.35cm,
     ] (0,0) {\marvel@header@font\MakeUppercase#1};
 \end{tikzpicture}%
}

\newcommand{\marvel@fancyheadeven}[1]{%
  \begin{tikzpicture}
    \node[
				color=black!50,
				fill=black!50,
				overlay,
				text width=\textwidth + 5cm,
				inner sep=0.2cm,
				inner ysep=0.3cm,
				yshift=0.35cm,
			] (0,0) {\vspace{1em}} ;
    \node[
	      text width=\textwidth,
	      inner sep=0cm,
	      inner ysep=0cm,
	      xshift=0cm,
	      color=white,
	      anchor=center,
	      align=left,
	      overlay,
	      yshift=0.35cm,
 		] (0,0) {\marvel@header@font\MakeUppercase#1};
 \end{tikzpicture}%
}

\newcommand{\marvel@fancyfootodd}{%
  \begin{tikzpicture}
    \node[
      text width=\textwidth,
      inner sep=0cm
    ] (mark) {};
  	\node[
      color=white,
      fill=black!50,
      overlay,
      anchor=west,
      inner sep=0.2cm,
      inner ysep=0.3cm,
      xshift=0.5cm,
      text width=5cm
    ] at (mark.east) {\marvel@footer@font\thepage{}} ;
 \end{tikzpicture}%
}

\newcommand{\marvel@fancyfooteven}{%
	\begin{tikzpicture}
    \node[
      text width=\textwidth,
      inner sep=0cm
    ] (mark) {};

    \node[
      color=white,
      fill=black!50,
      overlay,
      anchor=east,
      inner sep=0.2cm,
      inner ysep=0.3cm,
      xshift=-0.5cm,
      text width=5cm,
      align=right
    ] at (mark.west) {\marvel@footer@font\thepage{}} ;
 	\end{tikzpicture}%
}

\pagestyle{fancy}

%% common settings
\fancyhf{} % clear all header and footer fields
\fancyhead[CO]{\marvel@fancyheadodd{\leftmark}}
\fancyhead[CE]{\marvel@fancyheadeven{\leftmark}}
\fancyfoot[CO]{\marvel@fancyfootodd}
\fancyfoot[CE]{\marvel@fancyfooteven}

\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}

\fancypagestyle{plain}{
  \fancyhead[H]{}
	\fancyfoot[CO]{\marvel@fancyfootodd}
	\fancyfoot[CE]{\marvel@fancyfooteven}
}

\fancypagestyle{empty}{
  \fancyhead[H]{}
  \fancyfoot[F]{}
}

\renewcommand{\chaptermark}[1]{\markboth{\thechapter\ #1}{}}


%Make empty page really empty
\def\cleardoublepage{%
  \clearpage%
  \if@twoside%
    \ifodd\c@page%
    \else%
      \hbox{}%
      \thispagestyle{empty}%
      \newpage%
      \if@twocolumn%
        \hbox{}%
        \newpage%
      \fi%
    \fi%
  \fi%
}






